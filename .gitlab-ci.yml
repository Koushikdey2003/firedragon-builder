spec:
  inputs:
    edition:
      type: array
      default:
        - dr460nized
        - catppuccin
    platform:
      type: array
      default:
        - linux
        - win32
        - darwin
    arch:
      type: array
      default:
        - x64
        - arm64
    build:
      type: boolean
      default: true
    appimage:
      type: boolean
      default: true
    build-dev:
      type: boolean
      default: true

---

stages:
  - make-image
  - make-image-latest
  - source
  - prepare
  - build
  - appimage
  - build-dev
  - publish
  - release

variables:
  MAKE_IMAGE: $CI_REGISTRY_IMAGE/make:ci-$CI_PIPELINE_ID

make-image:
  stage: make-image
  needs: []
  tags:
    - dind
  script:
    - docker build -f docker/make.dockerfile -t $MAKE_IMAGE .
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker push $MAKE_IMAGE

make-image-latest:
  stage: make-image-latest
  needs:
    - job: make-image
      artifacts: false
  tags:
    - dind
  rules:
    - if: $CI_COMMIT_TAG
  script:
    - docker pull $MAKE_IMAGE
    - docker tag $MAKE_IMAGE $CI_REGISTRY_IMAGE/make:latest
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY
    - docker push $CI_REGISTRY_IMAGE/make:latest

source:
  stage: source
  needs:
    - job: make-image
      artifacts: false
  image: $MAKE_IMAGE
  before_script:
    - deno install --allow-scripts --frozen
  script:
    - deno task make source
  artifacts:
    paths:
      - .dist/firedragon-source-*.tar.zst

prepare:
  stage: prepare
  needs:
    - job: make-image
      artifacts: false
  image: $MAKE_IMAGE
  before_script:
    - deno install --allow-scripts --frozen
  script:
    - deno task build --write-buildid2
    - deno task build --release-build-before
    - date -d "$CI_PIPELINE_CREATED_AT" +%Y%m%d%H%M%S > _dist/moz_build_date
  after_script:
    - mkdir tmp_dist
    - rsync -aL _dist/ tmp_dist/
    - rm -rf _dist
    - mv tmp_dist _dist
  artifacts:
    paths:
      - _dist

build:
  stage: build
  needs:
    - job: make-image
      artifacts: false
    - job: source
      artifacts: true
    - job: prepare
      artifacts: true
  parallel:
    matrix:
      - EDITION: $[[inputs.edition]]
        PLATFORM: $[[inputs.platform]]
        ARCH: $[[inputs.arch]]
  rules:
    - if: '"$[[inputs.build]]" == "true"'
  image: $MAKE_IMAGE
  before_script:
    - deno install --allow-scripts --frozen
  script:
    - deno task make --edition=$EDITION --target=$PLATFORM-$ARCH --enable-bootstrap ${CI_COMMIT_TAG:+--enable-update} --with-moz-build-date=_dist/moz_build_date --with-buildid2=_dist/buildid2 --with-dist=_dist build
  artifacts:
    paths:
      - .dist/*-$PLATFORM-$ARCH.*

appimage:
  stage: appimage
  needs:
    - job: make-image
      artifacts: false
    - job: build
      artifacts: true
  parallel:
    matrix:
      - EDITION: $[[inputs.edition]]
        PLATFORM: linux
        ARCH: $[[inputs.arch]]
  rules:
    - if: '"$[[inputs.appimage]]" == "true"'
  image: $MAKE_IMAGE
  before_script:
    - deno install --allow-scripts --frozen
  script:
    - deno task make --edition=$EDITION --target=$PLATFORM-$ARCH appimage
  artifacts:
    paths:
      - .dist/*-appimage-$ARCH.AppImage

build-dev:
  stage: build-dev
  needs:
    - job: make-image
      artifacts: false
    - job: source
      artifacts: true
    - job: prepare
      artifacts: true
  parallel:
    matrix:
      - EDITION: $[[inputs.edition]]
        PLATFORM: $[[inputs.platform]]
        ARCH: $[[inputs.arch]]
  rules:
    - if: '"$[[inputs.build-dev]]" == "true"'
  image: $MAKE_IMAGE
  before_script:
    - deno install --allow-scripts --frozen
  script:
    - deno task make --edition=$EDITION --target=$PLATFORM-$ARCH --enable-bootstrap --with-moz-build-date=_dist/moz_build_date --with-buildid2=_dist/buildid2 build-dev
  artifacts:
    paths:
      - .dist/*-$PLATFORM-$ARCH-dev.*

release:
  stage: release
  needs:
    - job: source
      artifacts: true
    - job: build
      artifacts: true
    - job: appimage
      artifacts: true
    - job: build-dev
      artifacts: true
  rules:
    - if: $CI_COMMIT_TAG
  image: registry.gitlab.com/stefanwimmer128/archlinux-chaotic-paru-user:latest
  before_script:
    - paru -Syu --noconfirm git-cliff release-cli
  script:
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-source-$CI_COMMIT_TAG.tar.zst" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-source/${CI_COMMIT_TAG#v}/firedragon-source-$CI_COMMIT_TAG.tar.zst"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-x64.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-arm64.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-x64.exe" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.exe"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-arm64.exe" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.exe"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-x64.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-arm64.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-appimage-x64.AppImage" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-appimage-x64.AppImage"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-appimage-arm64.AppImage" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-appimage-arm64.AppImage"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-x64-dev.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64-dev.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-x64-dev.zip" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64-dev.zip"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-win32-arm64-dev.zip" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64-dev.zip"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-x64-dev.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64-dev.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-$CI_COMMIT_TAG-darwin-arm64-dev.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64-dev.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.exe" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.exe"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.exe" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.exe"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.mar" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.mar"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.update.xml" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.update.xml"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-x64.AppImage" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-x64.AppImage"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-arm64.AppImage" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-arm64.AppImage"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64-dev.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64-dev.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64-dev.zip" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64-dev.zip"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64-dev.zip" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64-dev.zip"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64-dev.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64-dev.dmg"'
    - 'curl --header "JOB-TOKEN: $CI_JOB_TOKEN" --upload-file ".dist/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64-dev.dmg" "$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64-dev.dmg"'
    - git config --global --add safe.directory "$PWD"
    - sed "s/@VERSION@/${CI_COMMIT_TAG#v}/" assets/downloads.md > .dist/release.md
    - echo '' >> .dist/release.md
    - git-cliff --current -s header >> .dist/release.md
    - |
      release-cli create --tag-name "$CI_COMMIT_TAG" --name "FireDragon $CI_COMMIT_TAG" --description ".dist/release.md" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.update.xml\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.mar\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-darwin-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.mar\",\"direct_asset_path\":\"/firedragon-darwin-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.update.xml\",\"direct_asset_path\":\"/firedragon-darwin-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.mar\",\"direct_asset_path\":\"/firedragon-darwin-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-win32-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.mar\",\"direct_asset_path\":\"/firedragon-win32-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.update.xml\",\"direct_asset_path\":\"/firedragon-win32-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.mar\",\"direct_asset_path\":\"/firedragon-win32-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-arm64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.update.xml\",\"direct_asset_path\":\"/firedragon-linux-arm64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-arm64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.mar\",\"direct_asset_path\":\"/firedragon-linux-arm64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-x64.update.xml\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.update.xml\",\"direct_asset_path\":\"/firedragon-linux-x64.update.xml\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-x64.mar\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.mar\",\"direct_asset_path\":\"/firedragon-linux-x64.mar\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64-dev.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64-dev.dmg\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-arm64-dev.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64-dev.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64-dev.dmg\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-x64-dev.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64-dev.zip\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64-dev.zip\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-arm64-dev.zip\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64-dev.zip\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64-dev.zip\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-x64-dev.zip\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-arm64-dev.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64-dev.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64-dev.tar.xz\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-x64-dev.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-arm64-dev.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64-dev.dmg\",\"direct_asset_path\":\"/firedragon-darwin-arm64-dev.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-x64-dev.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64-dev.dmg\",\"direct_asset_path\":\"/firedragon-darwin-x64-dev.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-arm64-dev.zip\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64-dev.zip\",\"direct_asset_path\":\"/firedragon-win32-arm64-dev.zip\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-x64-dev.zip\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64-dev.zip\",\"direct_asset_path\":\"/firedragon-win32-x64-dev.zip\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64-dev.tar.xz\",\"direct_asset_path\":\"/firedragon-linux-arm64-dev.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-x64-dev.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64-dev.tar.xz\",\"direct_asset_path\":\"/firedragon-linux-x64-dev.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-appimage-arm64.AppImage\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-arm64.AppImage\",\"direct_asset_path\":\"/firedragon-catppuccin-appimage-arm64.AppImage\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-appimage-x64.AppImage\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-appimage-x64.AppImage\",\"direct_asset_path\":\"/firedragon-catppuccin-appimage-x64.AppImage\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-arm64.dmg\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-arm64.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-darwin-x64.dmg\",\"direct_asset_path\":\"/firedragon-catppuccin-darwin-x64.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.exe\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-arm64.exe\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-arm64.exe\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.exe\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-win32-x64.exe\",\"direct_asset_path\":\"/firedragon-catppuccin-win32-x64.exe\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-arm64.tar.xz\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-arm64.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-catppuccin/${CI_COMMIT_TAG#v}/firedragon-catppuccin-$CI_COMMIT_TAG-linux-x64.tar.xz\",\"direct_asset_path\":\"/firedragon-catppuccin-linux-x64.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-appimage-arm64.AppImage\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-appimage-arm64.AppImage\",\"direct_asset_path\":\"/firedragon-appimage-arm64.AppImage\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-appimage-x64.AppImage\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-appimage-x64.AppImage\",\"direct_asset_path\":\"/firedragon-appimage-x64.AppImage\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-arm64.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-arm64.dmg\",\"direct_asset_path\":\"/firedragon-darwin-arm64.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-darwin-x64.dmg\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-darwin-x64.dmg\",\"direct_asset_path\":\"/firedragon-darwin-x64.dmg\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-arm64.exe\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-arm64.exe\",\"direct_asset_path\":\"/firedragon-win32-arm64.exe\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-win32-x64.exe\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-win32-x64.exe\",\"direct_asset_path\":\"/firedragon-win32-x64.exe\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-arm64.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-arm64.tar.xz\",\"direct_asset_path\":\"/firedragon-linux-arm64.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-$CI_COMMIT_TAG-linux-x64.tar.xz\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon/${CI_COMMIT_TAG#v}/firedragon-$CI_COMMIT_TAG-linux-x64.tar.xz\",\"direct_asset_path\":\"/firedragon-linux-x64.tar.xz\",\"link_type\":\"package\"}" \
        --assets-link "{\"name\":\"firedragon-source-$CI_COMMIT_TAG.tar.zst\",\"url\":\"$CI_API_V4_URL/projects/$CI_PROJECT_ID/packages/generic/firedragon-source/${CI_COMMIT_TAG#v}/firedragon-source-$CI_COMMIT_TAG.tar.zst\",\"direct_asset_path\":\"/firedragon-source.tar.zst\",\"link_type\":\"package\"}"
